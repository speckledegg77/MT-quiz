[
  {
    "schema_export": "{\n    \"tables\": [\n        {\n            \"table\": \"answers\",\n            \"columns\": [\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"id\",\n                    \"default\": \"gen_random_uuid()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"room_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"player_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"question_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"option_index\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"bool\",\n                    \"column\": \"is_correct\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"boolean\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"received_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"answer_text\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"text\"\n                }\n            ],\n            \"indexes\": [\n                {\n                    \"name\": \"answers_one_per_player_per_question\",\n                    \"definition\": \"CREATE UNIQUE INDEX answers_one_per_player_per_question ON public.answers USING btree (room_id, player_id, question_id)\"\n                },\n                {\n                    \"name\": \"answers_pkey\",\n                    \"definition\": \"CREATE UNIQUE INDEX answers_pkey ON public.answers USING btree (id)\"\n                },\n                {\n                    \"name\": \"answers_room_q_idx\",\n                    \"definition\": \"CREATE INDEX answers_room_q_idx ON public.answers USING btree (room_id, question_id)\"\n                }\n            ],\n            \"constraints\": [\n                {\n                    \"name\": \"answers_one_per_player_per_question\",\n                    \"type\": \"u\",\n                    \"definition\": \"UNIQUE (room_id, player_id, question_id)\"\n                },\n                {\n                    \"name\": \"answers_option_index_range_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (option_index IS NULL OR option_index >= 0 AND option_index <= 3)\"\n                },\n                {\n                    \"name\": \"answers_option_or_text_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (option_index IS NOT NULL AND answer_text IS NULL OR option_index IS NULL AND answer_text IS NOT NULL)\"\n                },\n                {\n                    \"name\": \"answers_pkey\",\n                    \"type\": \"p\",\n                    \"definition\": \"PRIMARY KEY (id)\"\n                },\n                {\n                    \"name\": \"answers_player_id_fkey\",\n                    \"type\": \"f\",\n                    \"definition\": \"FOREIGN KEY (player_id) REFERENCES players(id) ON DELETE CASCADE\"\n                },\n                {\n                    \"name\": \"answers_response_shape_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (option_index IS NOT NULL AND answer_text IS NULL OR option_index IS NULL AND answer_text IS NOT NULL)\"\n                },\n                {\n                    \"name\": \"answers_room_id_fkey\",\n                    \"type\": \"f\",\n                    \"definition\": \"FOREIGN KEY (room_id) REFERENCES rooms(id) ON DELETE CASCADE\"\n                }\n            ]\n        },\n        {\n            \"table\": \"pack_questions\",\n            \"columns\": [\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"pack_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"question_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                }\n            ],\n            \"indexes\": [\n                {\n                    \"name\": \"idx_pack_questions_pack\",\n                    \"definition\": \"CREATE INDEX idx_pack_questions_pack ON public.pack_questions USING btree (pack_id)\"\n                },\n                {\n                    \"name\": \"idx_pack_questions_question\",\n                    \"definition\": \"CREATE INDEX idx_pack_questions_question ON public.pack_questions USING btree (question_id)\"\n                },\n                {\n                    \"name\": \"pack_questions_pkey\",\n                    \"definition\": \"CREATE UNIQUE INDEX pack_questions_pkey ON public.pack_questions USING btree (pack_id, question_id)\"\n                }\n            ],\n            \"constraints\": [\n                {\n                    \"name\": \"pack_questions_pack_id_fkey\",\n                    \"type\": \"f\",\n                    \"definition\": \"FOREIGN KEY (pack_id) REFERENCES packs(id) ON DELETE CASCADE\"\n                },\n                {\n                    \"name\": \"pack_questions_pkey\",\n                    \"type\": \"p\",\n                    \"definition\": \"PRIMARY KEY (pack_id, question_id)\"\n                },\n                {\n                    \"name\": \"pack_questions_question_id_fkey\",\n                    \"type\": \"f\",\n                    \"definition\": \"FOREIGN KEY (question_id) REFERENCES questions(id) ON DELETE CASCADE\"\n                }\n            ]\n        },\n        {\n            \"table\": \"packs\",\n            \"columns\": [\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"display_name\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"round_type\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"sort_order\",\n                    \"default\": \"0\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"bool\",\n                    \"column\": \"is_active\",\n                    \"default\": \"true\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"boolean\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"created_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"updated_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                }\n            ],\n            \"indexes\": [\n                {\n                    \"name\": \"packs_pkey\",\n                    \"definition\": \"CREATE UNIQUE INDEX packs_pkey ON public.packs USING btree (id)\"\n                }\n            ],\n            \"constraints\": [\n                {\n                    \"name\": \"packs_pkey\",\n                    \"type\": \"p\",\n                    \"definition\": \"PRIMARY KEY (id)\"\n                },\n                {\n                    \"name\": \"packs_round_type_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (round_type = ANY (ARRAY['general'::text, 'audio'::text, 'picture'::text, 'mixed'::text]))\"\n                }\n            ]\n        },\n        {\n            \"table\": \"players\",\n            \"columns\": [\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"id\",\n                    \"default\": \"gen_random_uuid()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"room_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"name\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"score\",\n                    \"default\": \"0\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"joined_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                }\n            ],\n            \"indexes\": [\n                {\n                    \"name\": \"players_pkey\",\n                    \"definition\": \"CREATE UNIQUE INDEX players_pkey ON public.players USING btree (id)\"\n                },\n                {\n                    \"name\": \"players_room_idx\",\n                    \"definition\": \"CREATE INDEX players_room_idx ON public.players USING btree (room_id)\"\n                }\n            ],\n            \"constraints\": [\n                {\n                    \"name\": \"players_pkey\",\n                    \"type\": \"p\",\n                    \"definition\": \"PRIMARY KEY (id)\"\n                },\n                {\n                    \"name\": \"players_room_id_fkey\",\n                    \"type\": \"f\",\n                    \"definition\": \"FOREIGN KEY (room_id) REFERENCES rooms(id) ON DELETE CASCADE\"\n                }\n            ]\n        },\n        {\n            \"table\": \"questions\",\n            \"columns\": [\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"text\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"jsonb\",\n                    \"column\": \"options\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"jsonb\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"answer_index\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"explanation\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"round_type\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"audio_path\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"created_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"updated_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"answer_type\",\n                    \"default\": \"'mcq'::text\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"answer_text\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"_text\",\n                    \"column\": \"accepted_answers\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"ARRAY\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"image_path\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"text\"\n                }\n            ],\n            \"indexes\": [\n                {\n                    \"name\": \"questions_pkey\",\n                    \"definition\": \"CREATE UNIQUE INDEX questions_pkey ON public.questions USING btree (id)\"\n                }\n            ],\n            \"constraints\": [\n                {\n                    \"name\": \"questions_answer_index_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (answer_index >= 0 AND answer_index <= 3)\"\n                },\n                {\n                    \"name\": \"questions_answer_shape_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (answer_type = 'mcq'::text AND\\nCASE\\n    WHEN options IS NULL THEN '-1'::integer\\n    WHEN jsonb_typeof(options) = 'array'::text THEN jsonb_array_length(options)\\n    ELSE '-1'::integer\\nEND = 4 AND (answer_index = ANY (ARRAY[0, 1, 2, 3])) AND answer_text IS NULL OR answer_type = 'text'::text AND\\nCASE\\n    WHEN options IS NULL THEN 0\\n    WHEN jsonb_typeof(options) = 'array'::text THEN jsonb_array_length(options)\\n    ELSE '-1'::integer\\nEND = 0 AND answer_index IS NULL AND answer_text IS NOT NULL)\"\n                },\n                {\n                    \"name\": \"questions_answer_type_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (answer_type = ANY (ARRAY['mcq'::text, 'text'::text]))\"\n                },\n                {\n                    \"name\": \"questions_pkey\",\n                    \"type\": \"p\",\n                    \"definition\": \"PRIMARY KEY (id)\"\n                },\n                {\n                    \"name\": \"questions_round_type_check\",\n                    \"type\": \"c\",\n                    \"definition\": \"CHECK (round_type = ANY (ARRAY['general'::text, 'audio'::text, 'picture'::text]))\"\n                }\n            ]\n        },\n        {\n            \"table\": \"rooms\",\n            \"columns\": [\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"id\",\n                    \"default\": \"gen_random_uuid()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"code\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"phase\",\n                    \"default\": \"'lobby'::text\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"jsonb\",\n                    \"column\": \"question_ids\",\n                    \"default\": \"'[]'::jsonb\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"jsonb\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"question_index\",\n                    \"default\": \"0\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"countdown_seconds\",\n                    \"default\": \"3\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"answer_seconds\",\n                    \"default\": \"12\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"reveal_delay_seconds\",\n                    \"default\": \"2\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"int4\",\n                    \"column\": \"reveal_seconds\",\n                    \"default\": \"5\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"integer\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"countdown_start_at\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"open_at\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"close_at\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"reveal_at\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"next_at\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"created_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"audio_mode\",\n                    \"default\": \"'display'::text\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"_text\",\n                    \"column\": \"selected_packs\",\n                    \"default\": \"ARRAY['general'::text]\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"ARRAY\"\n                }\n            ],\n            \"indexes\": [\n                {\n                    \"name\": \"rooms_code_idx\",\n                    \"definition\": \"CREATE INDEX rooms_code_idx ON public.rooms USING btree (code)\"\n                },\n                {\n                    \"name\": \"rooms_code_key\",\n                    \"definition\": \"CREATE UNIQUE INDEX rooms_code_key ON public.rooms USING btree (code)\"\n                },\n                {\n                    \"name\": \"rooms_pkey\",\n                    \"definition\": \"CREATE UNIQUE INDEX rooms_pkey ON public.rooms USING btree (id)\"\n                }\n            ],\n            \"constraints\": [\n                {\n                    \"name\": \"rooms_code_key\",\n                    \"type\": \"u\",\n                    \"definition\": \"UNIQUE (code)\"\n                },\n                {\n                    \"name\": \"rooms_pkey\",\n                    \"type\": \"p\",\n                    \"definition\": \"PRIMARY KEY (id)\"\n                }\n            ]\n        },\n        {\n            \"table\": \"round_results\",\n            \"columns\": [\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"id\",\n                    \"default\": \"gen_random_uuid()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"room_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"text\",\n                    \"column\": \"question_id\",\n                    \"default\": null,\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"text\"\n                },\n                {\n                    \"udt\": \"uuid\",\n                    \"column\": \"winner_player_id\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"uuid\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"winner_received_at\",\n                    \"default\": null,\n                    \"nullable\": \"YES\",\n                    \"data_type\": \"timestamp with time zone\"\n                },\n                {\n                    \"udt\": \"timestamptz\",\n                    \"column\": \"created_at\",\n                    \"default\": \"now()\",\n                    \"nullable\": \"NO\",\n                    \"data_type\": \"timestamp with time zone\"\n                }\n            ],\n            \"indexes\": [\n                {\n                    \"name\": \"round_results_pkey\",\n                    \"definition\": \"CREATE UNIQUE INDEX round_results_pkey ON public.round_results USING btree (id)\"\n                },\n                {\n                    \"name\": \"round_results_room_id_question_id_key\",\n                    \"definition\": \"CREATE UNIQUE INDEX round_results_room_id_question_id_key ON public.round_results USING btree (room_id, question_id)\"\n                },\n                {\n                    \"name\": \"round_results_room_q_idx\",\n                    \"definition\": \"CREATE INDEX round_results_room_q_idx ON public.round_results USING btree (room_id, question_id)\"\n                }\n            ],\n            \"constraints\": [\n                {\n                    \"name\": \"round_results_pkey\",\n                    \"type\": \"p\",\n                    \"definition\": \"PRIMARY KEY (id)\"\n                },\n                {\n                    \"name\": \"round_results_room_id_fkey\",\n                    \"type\": \"f\",\n                    \"definition\": \"FOREIGN KEY (room_id) REFERENCES rooms(id) ON DELETE CASCADE\"\n                },\n                {\n                    \"name\": \"round_results_room_id_question_id_key\",\n                    \"type\": \"u\",\n                    \"definition\": \"UNIQUE (room_id, question_id)\"\n                },\n                {\n                    \"name\": \"round_results_winner_player_id_fkey\",\n                    \"type\": \"f\",\n                    \"definition\": \"FOREIGN KEY (winner_player_id) REFERENCES players(id) ON DELETE SET NULL\"\n                }\n            ]\n        }\n    ],\n    \"generated_at\": \"2026-02-22T17:39:11.99687+00:00\"\n}"
  }
]